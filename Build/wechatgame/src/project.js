window.__require=function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return i(e[a][1][t]||t)},l,l.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({Animal:[function(t,e,n){"use strict";cc._RF.push(e,"055aawl1vZMiYFp5q1Stuel","Animal"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Injector/InjectDecorator"),i=t("../util/Model"),r=t("../../lib/extensions/IocView"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="",e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.rePositonAnimal=function(t){var e=this.mMdl.animalTextureRect,n=e.width,o=e.height,i={x:0,y:0};0===t&&(i={x:-1,y:1}),1===t&&(i={x:1,y:1}),2===t&&(i={x:1,y:-1}),3===t&&(i={x:-1,y:-1}),this.node.setPosition(i.x*n/2,i.y*o/2)},__decorate([o.inject(i.__IC_Model,i.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([s],e.prototype,"type",void 0),e=__decorate([c],e)}(r.IocView);n.default=u,cc._RF.pop()},{"../../lib/extensions/IocView":"IocView","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../util/Model":"Model"}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"1a590zTjPRPRILToKDZuVBk","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInit=!1,e}return __extends(e,t),e.prototype.onConstructor=function(){this.playLoopCount=0,this.audioMap=new Map},e.prototype.play=function(t){if(this.hasAudio(t)){var e=this.getAudio(t);0!=this.audios.length&&(this.audios[this.playLoopCount]?(this.audios[this.playLoopCount].clip=e,this.audios[this.playLoopCount].play()):this.playLoopCount=0,this.playLoopCount<this.audios.length-1?this.playLoopCount+=1:this.playLoopCount=0)}},e.prototype.playBgm=function(){this.bgm.clip&&(this.bgm.loop=!0,this.bgm.play())},e.prototype.hasAudio=function(t){return this.audioMap.has(t)},e.prototype.getAudio=function(t){return this.audioMap.get(t)},e.prototype.setAudio=function(t,e){this.audioMap.set(t,e)},e}(t("./Singleton").Singleton);n.default=o,cc._RF.pop()},{"./Singleton":"Singleton"}],AudioUtil:[function(t,e,n){"use strict";cc._RF.push(e,"c9d4a7XyaZMoZh+cVBXbXfc","AudioUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t("./Singleton").Singleton);n.AudioUtil=o,cc._RF.pop()},{"./Singleton":"Singleton"}],BackHomeCommand:[function(t,e,n){"use strict";cc._RF.push(e,"7c75amynftAzpGCjk4p9P7M","BackHomeCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Command/Command"),i=t("../../lib/framework/Injector/InjectDecorator"),r=t("../../lib/framework/Injector/InjectBinder"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(){this.gameOver()},e.prototype.gameOver=function(){this.inj.unbindAllMark(),cc.director.loadScene("Begin")},__decorate([i.inject(r.__IC_InjectBinder)],e.prototype,"inj",void 0),e}(o.Command);n.BackHomeCommand=a,cc._RF.pop()},{"../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectBinder":"InjectBinder","../../lib/framework/Injector/InjectDecorator":"InjectDecorator"}],Begin:[function(t,e,n){"use strict";cc._RF.push(e,"c3452KV+2hL0LWnbh0DeGkY","Begin"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.beginGame=function(){cc.director.loadScene("Game")},e.prototype.lookRank=function(){cc.director.loadScene("Rank")},e=__decorate([i],e)}(cc.Component));n.default=r,cc._RF.pop()},{}],BindConst:[function(t,e,n){"use strict";cc._RF.push(e,"0c27eoTvgpHwaWRQZiPHUPY","BindConst"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.NULL=Symbol("NULL")}(n.BindingConst||(n.BindingConst={})),cc._RF.pop()},{}],Binder:[function(t,e,n){"use strict";cc._RF.push(e,"4b260+n2VJIqIlKzjc+tnsV","Binder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Binding"),i=t("./BindConst"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IBinder"},enumerable:!0,configurable:!0}),e}(t("../IocConst").IConstructorName);n.__IC_Binder=r;var a=function(){function t(){this.init()}return t.prototype.init=function(){this._bindings=new Map},t.prototype.resolver=function(t){var e=t.key;this.resolveBinding(t,e)},t.prototype.resolveBinding=function(t,e){var n,o=null==t.name?i.BindingConst.NULL:t.name;if(this._bindings.has(e)){if((n=this._bindings.get(e)).has(o)){var r=n.get(o);r!=t&&(r.value||n.delete(o))}}else n=new Map,this._bindings.set(e,n);n.has(i.BindingConst.NULL)&&n.get(i.BindingConst.NULL)===t&&n.delete(i.BindingConst.NULL),n.has(o)||n.set(o,t)},t.prototype.bind=function(t){var e=this.getRawBinding();return e.bind(t),e},t.prototype.unbind=function(t,e){var n=o.Binding.checkAbstract(t);if(this._bindings.has(n)){var r=this._bindings.get(n),a=void 0;a=e||i.BindingConst.NULL,r.has(a)&&r.delete(a)}},t.prototype.getRawBinding=function(){return new o.Binding(this.resolver.bind(this))},t.prototype.getBinding=function(t,e){if(this._bindings.has(t)){var n=this._bindings.get(t);return e||(e=i.BindingConst.NULL),n.has(e)?n.get(e):null}},t.prototype.getBindingMap=function(t){if(this._bindings.has(t))return this._bindings.get(t)},t}();n.Binder=a,cc._RF.pop()},{"../IocConst":"IocConst","./BindConst":"BindConst","./Binding":"Binding"}],Binding:[function(t,e,n){"use strict";cc._RF.push(e,"24a3eCCD1hACKc9yDS2PNav","Binding"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IBinding"},enumerable:!0,configurable:!0}),e}(t("../IocConst").IConstructorName);n.__IC_Binding=o;var i=function(){function t(t){this._resolver=t,this._key=null,this._value=null,this._name=null}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.bind=function(e){return this._key=t.checkAbstract(e),this},t.prototype.to=function(t){return this._value=t,null!=this._resolver&&this._resolver(this),this},t.prototype.toName=function(t){return this._name=t,null!=this._resolver&&this._resolver(this),this},Object.defineProperty(t.prototype,"isKeyConstructor",{get:function(){return t.isConstructor(this._key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValueConstructor",{get:function(){return t.isConstructor(this._value)},enumerable:!0,configurable:!0}),t.isConstructor=function(t){return"function"==typeof t&&!!t.prototype},t.checkAbstract=function(t){return t.constructorName?t.constructorName:t},t}();n.Binding=i,cc._RF.pop()},{"../IocConst":"IocConst"}],CommandBinder:[function(t,e,n){"use strict";cc._RF.push(e,"dd0049hYy5L47Hdzfjw/eZ9","CommandBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Bind/Binding"),i=t("../Injector/InjectBinder"),r=t("./CommandBinding"),a=t("./Command"),c=t("../../Extensions/Pool"),s=t("./CommandConst"),u=t("../Injector/InjectDecorator"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pools=new Map,e.activeCommands=new Set,e.activeSequences=new Map,e.usePooling=!1,e}return __extends(e,t),e.prototype.getPool=function(t){return this.pools.has(t)?this.pools.get(t):null},e.prototype.resolver=function(e){var n=this;if(t.prototype.resolver.call(this,e),this.usePooling&&e.isPooled&&null!=e.value){var o=this,i=e.value;0===i.length&&(i=[]).push(e.value),i&&i.length>0&&i.forEach(function(t){if(0==o.pools.has(t)){var e=n.makePoolFromType(t);o.pools.set(t,e)}})}},e.prototype.makePoolFromType=function(t){var e=t;this.injectBinder.bind(t).to(t),this.injectBinder.bind(c.Pool).to(c.Pool).toName(s.CommandConst.COMMAND_POOL);var n=this.injectBinder.getInstance(c.Pool,s.CommandConst.COMMAND_POOL);return this.injectBinder.unbind(c.Pool,s.CommandConst.COMMAND_POOL),n.bind(e),n},e.prototype.getRawBinding=function(){return new r.CommandBinding(this.resolver.bind(this))},e.prototype.bind=function(e){return t.prototype.bind.call(this,e)},e.prototype.invokeCommand=function(t,e,n,o){var i=this.createCommand(t,n);return i.sequenceId=o,this.trackCommand(i,e),this.executeCommand(i,n),i},e.prototype.createCommand=function(t,e){var n=this.getCommand(t);if(null==n){var o="A Command ";throw null!=e&&(o+="tied to data "+e.toString()),o+=" could not be instantiated.\nThis might be caused by a null pointer during instantiation or failing to override Execute (generally you shouldn't have constructor code in Commands).",new Error(o)}return n.data=e,n},e.prototype.getCommand=function(t){if(this.usePooling&&this.pools.has(t)){var e=this.pools.get(t);return(n=e.getInstance())?n.isClean&&(this.injectBinder.injector.inject(n,null),n.deploy()):(n=this.injectBinder.getInstance(t,null),e.add(n)),n}this.injectBinder.bind(a.__IC_Command).to(t);var n=this.injectBinder.getInstance(a.__IC_Command,null);return this.injectBinder.unbind(a.__IC_Command,null),n},e.prototype.trackCommand=function(t,e){e.isSequence?this.activeSequences.set(t,e):this.activeCommands.add(t)},e.prototype.executeCommand=function(t,e){null!=t&&t.execute.apply(t,e)},e.prototype.onDispose=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.getBinding(t,null);if(null!=o)if(o.isSequence)this.next(o,e,0);else for(var i=o.value.length+1,r=0;r<i;r++)this.next(o,e,r)},e.prototype.next=function(t,e,n){var o=t.value;if(0===o.length&&(o=[]).push(t.value),n<o.length){var i=o[n],r=this.invokeCommand(i,t,e,n);this.releaseCommand(r)}else this.disposeOfSequencedData(e),t.isOnce&&this.unbind(t,null)},e.prototype.disposeOfSequencedData=function(t){},e.prototype.releaseCommand=function(t){if(!t.isRetain){var e=t.constructor;if(this.usePooling&&this.pools.has(e)&&this.pools.get(e).returnInstance(t),this.activeCommands.has(t))this.activeCommands.delete(t);else if(this.activeSequences.has(t)){var n=this.activeSequences.get(t),o=t.data;this.activeSequences.delete(t),this.next(n,o,t.sequenceId+1)}}},__decorate([u.inject(i.__IC_InjectBinder)],e.prototype,"injectBinder",void 0),e}(t("../Bind/Binder").Binder);n.CommandBinder=l;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.usePooling=!0,e}return __extends(e,t),e.prototype.resolveBinding=function(e,n){(t.prototype.resolveBinding.call(this,e,n),this._bindings.has(n))&&n.addListener(this.onDispose.bind(this))},e.prototype.bind=function(e){var n=this.injectBinder.getBinding(e,null),i=null;return o.Binding.isConstructor(e)&&(null==n&&(n=this.injectBinder.bind(e)).toSingleton(),i=this.injectBinder.getInstance(e,null)),i?t.prototype.bind.call(this,i):t.prototype.bind.call(this,e)},e.prototype.getBinding=function(e,n){var i;return i=o.Binding.isConstructor(e)?this.injectBinder.getInstance(e,n):e,t.prototype.getBinding.call(this,i,n)},e.prototype.invokeCommand=function(t,e,n,o){e.key;var i=this.createCommandForSignal(t,n);return i.sequenceId=o,this.trackCommand(i,e),this.executeCommand(i,n),i},e.prototype.createCommandForSignal=function(t,e){if(null!=e)new Set;var n=this.getCommand(t);return n.data=e,n},e}(l);n.SignalCommandBinder=d,cc._RF.pop()},{"../../Extensions/Pool":"Pool","../Bind/Binder":"Binder","../Bind/Binding":"Binding","../Injector/InjectBinder":"InjectBinder","../Injector/InjectDecorator":"InjectDecorator","./Command":"Command","./CommandBinding":"CommandBinding","./CommandConst":"CommandConst"}],CommandBinding:[function(t,e,n){"use strict";cc._RF.push(e,"91cffox9L9GUZpMs4Gv3ZJL","CommandBinding"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"isSequence",{get:function(){return this._isSequence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnce",{get:function(){return this._isOnce},enumerable:!0,configurable:!0}),e.prototype.to=function(e){return t.prototype.to.call(this,e)},e.prototype.toName=function(e){return t.prototype.toName.call(this,e)},e.prototype.Pooled=function(){return this.isPooled=!0,this._resolver(this),this},e}(t("../Bind/Binding").Binding);n.CommandBinding=o,cc._RF.pop()},{"../Bind/Binding":"Binding"}],CommandConst:[function(t,e,n){"use strict";cc._RF.push(e,"8d3aaDS9sBFuLg+8/a1m5dA","CommandConst"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.COMMAND_POOL="COMMAND_POOL"}(n.CommandConst||(n.CommandConst={})),cc._RF.pop()},{}],Command:[function(t,e,n){"use strict";cc._RF.push(e,"41d2enDgqVFYaebregXXZwt","Command"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./ICommandBinder"),i=t("../Injector/InjectBinder"),r=t("../Injector/InjectDecorator"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"ICommand"},enumerable:!0,configurable:!0}),e}(t("../IocConst").IConstructorName);n.__IC_Command=a;var c=function(){function t(){this._clean=!1,this._retain=!1}return t.prototype.deploy=function(){this._clean=!1},t.prototype.clean=function(){this._clean=!0},Object.defineProperty(t.prototype,"isClean",{get:function(){return this._clean},enumerable:!0,configurable:!0}),t.prototype.retain=function(){this._retain=!0},t.prototype.release=function(){this._retain=!1},Object.defineProperty(t.prototype,"isRetain",{get:function(){return this._retain},enumerable:!0,configurable:!0}),t.prototype.restore=function(){this.injectBinder.injector.uninject(this),this.clean()},t.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},__decorate([r.inject(i.__IC_InjectBinder)],t.prototype,"injectBinder",void 0),__decorate([r.inject(o.__IC_CommandBinder)],t.prototype,"commandBinder",void 0),t}();n.Command=c,cc._RF.pop()},{"../Injector/InjectBinder":"InjectBinder","../Injector/InjectDecorator":"InjectDecorator","../IocConst":"IocConst","./ICommandBinder":"ICommandBinder"}],Common:[function(t,e,n){"use strict";cc._RF.push(e,"70cfeK7325Es5JOBuflEwIS","Common"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.WxGameApi=null,t.version="v1.6.0",t.isInit=!1,t.persistRootNode=null,t.root=null,t.shareTickets=[],t.isHasWxRank=!1,t.maxScore=0,t.userOpenId=0,t.session_key="",t.unionId=0,t}();n.default=o,cc._RF.pop()},{}],Context:[function(t,e,n){"use strict";cc._RF.push(e,"08fb1Z5GJRB+pO4YtrgQeUn","Context"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Injector/InjectBinder"),i=t("../Command/CommandBinder"),r=t("../IocConst"),a=t("../Command/ICommandBinder"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IContext"},enumerable:!0,configurable:!0}),e}(r.IConstructorName);n.__IC_Context=c;var s=function(){function t(e){null==t.firstContext||null==t.firstContext.getRoot()?(t.firstContext=this,this.crossContextBinder=this.injectBinder):t.firstContext.addCrossContext(this),this.setRoot(e),this.addCore(),this.start()}return Object.defineProperty(t.prototype,"injectBinder",{get:function(){return this._injectBinder||(this._injectBinder=new o.InjectBinder),this._injectBinder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crossContextBinder",{get:function(){return this._crossContextBinder},set:function(t){this._crossContextBinder=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandBinder",{get:function(){return this._commandBinder},enumerable:!0,configurable:!0}),t.prototype.getRoot=function(){return this.root},t.prototype.addCrossContext=function(t){return t.crossContextBinder=this.injectBinder,this},t.prototype.removeCrossContext=function(t){},t.prototype.setRoot=function(t){return this.root=t,this},t.prototype.restart=function(){return this.addCore(),this.start(),this},t.prototype.start=function(){return this.instantiateCore(),this.mapBindings(),this.postBindings(),this.launch(),this},t.prototype.launch=function(){},t.prototype.instantiateCore=function(){this._commandBinder=this.injectBinder.getInstance(a.__IC_CommandBinder,null)},t.prototype.mapBindings=function(){},t.prototype.postBindings=function(){},t.prototype.addCore=function(){this.injectBinder.bind(o.__IC_InjectBinder).toValue(this.injectBinder),this.injectBinder.bind(a.__IC_CommandBinder).to(i.SignalCommandBinder).toSingleton()},t}();n.Context=s,cc._RF.pop()},{"../Command/CommandBinder":"CommandBinder","../Command/ICommandBinder":"ICommandBinder","../Injector/InjectBinder":"InjectBinder","../IocConst":"IocConst"}],CountDownView:[function(t,e,n){"use strict";cc._RF.push(e,"80ee7elEB5BLaAfOp8v4puS","CountDownView"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/extensions/IocView"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.config=function(t,e){this.time=e,this.value=t,this.step=this.time/this.value},e.prototype.play=function(){},e.prototype.update=function(t){if(this.time>=0){var e=this.time;this.time-=t;var n=Math.fround(this.time);e!==n&&(this.getComponent(cc.Label).string=n>=0?""+n:"Go~!")}else this.destroy()},e=__decorate([r],e)}(o.IocView));n.default=a,cc._RF.pop()},{"../../lib/extensions/IocView":"IocView"}],DecoratorClassBinder:[function(t,e,n){"use strict";cc._RF.push(e,"eab30+Z3K1G/r+W7YovPHZ6","DecoratorClassBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Bind/Binder"),i=t("../Bind/BindConst"),r=t("./DecoratorClass"),a=t("./DecoratorClassBinding"),c=t("../../Extensions/Prototype"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this._bindings=new Map,this._decoratorClassBufferMap=new Map},e.prototype.has=function(t){return this._bindings.has(t)},e.prototype.get=function(t){if(!(t instanceof Object))throw new Error("proto must is a object but"+t+"is not");if(!this._decoratorClassBufferMap.has(t)){var e=c.Prototype.getPrototypeList(t),n=new r.DecoratorClass,o=[],i=void 0,a=[];if(e&&e.length>0)for(var s=0;s<e.length;s++)(i=this.getBindingMap(e[s]))&&i.size>0&&i.forEach(function(t){a.push(t)});var u=void 0;if(a&&a.length>0)for(s=0;s<a.length;s++)if((u=a[s])&&u.size>0)for(var l=u.values(),d=0;d<u.size;d++){var p=l.next();o.push(p.value)}n.list=o,this._decoratorClassBufferMap.set(t,n)}return this._decoratorClassBufferMap.get(t)},e.prototype.bind=function(e){return t.prototype.bind.call(this,e)},e.prototype.getBinding=function(e,n){return t.prototype.getBinding.call(this,e,n)},e.prototype.getRawBinding=function(){return new a.DecoratorClassBinding(this.resolver.bind(this))},e.prototype.resolver=function(e){t.prototype.resolver.call(this,e)},e.prototype.resolveBinding=function(t,e){if(t.property){var n,o,r=null==t.name?i.BindingConst.NULL:t.name;if(this._bindings.has(e)){if((n=this._bindings.get(e)).has(r)){var a=n.get(r);if(a.has(t.property))(s=a.get(t.property))&&s!=t&&(s.value||n.delete(r))}}else n=new Map,this._bindings.set(e,n);if(n.has(i.BindingConst.NULL)){var c=n.get(i.BindingConst.NULL);if(c.has(t.property)){var s=c.get(t.property);t.property===t&&c.delete(i.BindingConst.NULL)}}n.has(r)?(o=n.get(r)).has(t.property)||o.set(t.property,t):((o=new Map).set(t.property,t),n.set(r,o))}},e.prototype.getBindingMap=function(t){if(this._bindings.has(t))return this._bindings.get(t)},e}(o.Binder);n.DecoratorClassBinder=s,cc._RF.pop()},{"../../Extensions/Prototype":"Prototype","../Bind/BindConst":"BindConst","../Bind/Binder":"Binder","./DecoratorClass":"DecoratorClass","./DecoratorClassBinding":"DecoratorClassBinding"}],DecoratorClassBinding:[function(t,e,n){"use strict";cc._RF.push(e,"307f0Gz1RxASbaNsmJnXrWg","DecoratorClassBinding"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"property",{get:function(){return this._property},enumerable:!0,configurable:!0}),e.prototype.toProperty=function(t){return this._property=t,null!=this._resolver&&this._resolver(this),this},e.prototype.to=function(e){return t.prototype.to.call(this,e)},e.prototype.toName=function(e){return t.prototype.toName.call(this,e)},e}(t("../Bind/Binding").Binding);n.DecoratorClassBinding=o,cc._RF.pop()},{"../Bind/Binding":"Binding"}],DecoratorClass:[function(t,e,n){"use strict";cc._RF.push(e,"9481b2IV5RHb6UwyBEvPXp1","DecoratorClass"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return Object.defineProperty(t.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t},enumerable:!0,configurable:!0}),t}();n.DecoratorClass=o,cc._RF.pop()},{}],DecoratorConst:[function(t,e,n){"use strict";cc._RF.push(e,"09447NmtN5FHa8wHnzHvKKu","DecoratorConst"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./DecoratorClassBinder");(function(t){t.DECORATOR_CLASS_BINDER=new o.DecoratorClassBinder})(n.DecoratorConst||(n.DecoratorConst={})),cc._RF.pop()},{"./DecoratorClassBinder":"DecoratorClassBinder"}],Food:[function(t,e,n){"use strict";cc._RF.push(e,"5d9f4AhLjVISJtS9jbH7Hp/","Food"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Injector/InjectDecorator"),i=t("./Animal"),r=t("../../lib/extensions/IocView"),a=t("../signal/MainSignalEnum"),c=t("../util/Model"),s=t("../util/Util"),u=t("../util/Manager"),l=cc._decorator,d=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.accel=0,e.moveY=0,e.type="",e}var n;return __extends(e,t),n=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.reuse=function(){},e.prototype.unuse=function(){},e.prototype.clear=function(){this.speed=175,this.accel=125,this.moveY=0,this.node.x=0,this.node.y=0},e.prototype.update=function(t){this.mMdl.isHide||this.inited&&(this.speed+=this.accel*t,this.moveY=this.speed*t,this.node.y-=this.moveY)},e.prototype.onCollisionEnter=function(t,e){if(this.inited){var o=t.getComponent(i.default);if(o||!(o=t.getComponent(n))){var r=e.getComponent(n);o&&r&&o.type===r.type?(this.sMgr.get(a.MainSignalEnum.Match).dispatch(a.GameSignalEnum.onMatch,this.node),this.resPoolNode(this.node)):this.sMgr.get(a.MainSignalEnum.Match).dispatch(a.GameSignalEnum.onNotMatch),this.inited=!1}}},e.prototype.resPoolNode=function(t){var e=this.mMdl.currentFoodNodes.indexOf(t);return-1!==e&&this.mMdl.currentFoodNodes.splice(e,1),this.mMdl.foodPool.res(t)},e.prototype.randomProps=function(){var t,e=this;this.inited=!1;var n,o=this.mUtl.randomCoin();-1===this.mMdl.lastFoodIndex&&(this.mMdl.lastFoodIndex=o),-1===this.mMdl.lastTrack&&(this.mMdl.lastTrack=o);var i=[(n=o===this.mMdl.lastTrack?this.mMdl.lastFoodIndex:o?this.mMdl.lastFoodIndex+1:this.mMdl.lastFoodIndex-1)-1,n+1].map(function(t){return t<0&&(t=e.mMdl.foodDatas.length+t),t>=e.mMdl.foodDatas.length&&(t-=e.mMdl.foodDatas.length),t}),r=(t=this.mUtl).randomValue.apply(t,i);this.mMdl.lastFoodIndex=r,this.mMdl.lastTrack=o,this.foodData=this.mMdl.foodDatas[r];var a=this.node;this.type=this.foodData.type,a.getComponent(cc.Sprite).spriteFrame=this.foodData.spriteFrame;var c=(o?1:-1)*(this.mMdl.animalTextureRect.width/2);a.setPosition(c,this.mUtl.getSceneSize().height/2),this.inited=!0},__decorate([o.inject(c.__IC_Model,c.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([o.inject(s.__IC_Util,s.UtilType.Main)],e.prototype,"mUtl",void 0),__decorate([o.inject(u.__IC_Manager,u.ManagerType.Audio)],e.prototype,"aMgr",void 0),e=n=__decorate([d],e)}(r.IocView));n.default=p,cc._RF.pop()},{"../../lib/extensions/IocView":"IocView","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../signal/MainSignalEnum":"MainSignalEnum","../util/Manager":"Manager","../util/Model":"Model","../util/Util":"Util","./Animal":"Animal"}],GenerateCommand:[function(t,e,n){"use strict";cc._RF.push(e,"6c25c7ouOVJS6Cm1Kuns6M7","GenerateCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Command/Command"),i=t("../../lib/framework/Injector/InjectDecorator"),r=t("../view/Animal"),a=t("../util/Model"),c=t("../helper/PrefabPool"),s=t("../util/Util"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){var e=this;this.init().then(function(){e.generateTouchArea(),e.generateAnimals(),t()})},e.prototype.generateTouchArea=function(){var t=new cc.Node("TouchArea");this.sceneNode.addChild(t),t.width=this.mUtl.getSceneSize().width,t.height=this.mUtl.getSceneSize().height,this.tUtl.registerTouchArea(t,!0)},e.prototype.init=function(){this.mMdl.currentFoodNodes=[],this.mMdl.foodPool=new c.default("Food",this.foodPrefab);var t=this.loadFoodRes(),e=this.loadAnimalRes();return Promise.all([t,e])},e.prototype.loadFoodRes=function(){var t=this;return new Promise(function(e,n){Promise.all(t.mMdl.foodDatas.map(function(e){return t.mUtl.spriteRes(e.image)})).then(function(n){n.forEach(function(e,n){t.mMdl.foodDatas[n].spriteFrame=e}),e()})})},e.prototype.loadAnimalRes=function(){var t=this;return new Promise(function(e,n){Promise.all(t.mMdl.animalDatas.map(function(e){return t.mUtl.spriteRes(e.image)})).then(function(n){n&&n.forEach(function(e,n){t.mMdl.animalDatas[n].spriteFrame=e}),e()})})},e.prototype.generateAnimals=function(){var t=this;this.mMdl.animalDatas.forEach(function(e,n){var o=cc.instantiate(t.animalPrefab),i=o.getComponent(r.default),a=o.getComponent(cc.Sprite);t.animalsNode.addChild(o),a.spriteFrame=e.spriteFrame,i.type=e.type,i.rePositonAnimal(n)})},__decorate([i.inject(a.__IC_Model,a.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([i.inject(s.__IC_Util,s.UtilType.Main)],e.prototype,"mUtl",void 0),__decorate([i.inject(s.__IC_Util,s.UtilType.Touch)],e.prototype,"tUtl",void 0),__decorate([i.inject(cc.Node,"Scene")],e.prototype,"sceneNode",void 0),__decorate([i.inject(cc.Node,"Animals")],e.prototype,"animalsNode",void 0),__decorate([i.inject(cc.Prefab,"Animal")],e.prototype,"animalPrefab",void 0),__decorate([i.inject(cc.Prefab,"Food")],e.prototype,"foodPrefab",void 0),e}(o.Command);n.GenerateCommand=u,cc._RF.pop()},{"../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../helper/PrefabPool":"PrefabPool","../util/Model":"Model","../util/Util":"Util","../view/Animal":"Animal"}],ICommandBinder:[function(t,e,n){"use strict";cc._RF.push(e,"327c1AdwbhKJYwdpbcHPitu","ICommandBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"constructorName",{get:function(){return"ICommandBinder"},enumerable:!0,configurable:!0}),e}(t("../IocConst").IConstructorName);n.__IC_CommandBinder=o,cc._RF.pop()},{"../IocConst":"IocConst"}],IRoot:[function(t,e,n){"use strict";cc._RF.push(e,"14e5cQyhBNG0rqs9eGNArb7","IRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IRoot"},enumerable:!0,configurable:!0}),e}(t("../IocConst").IConstructorName);n.__IC_Root=o,cc._RF.pop()},{"../IocConst":"IocConst"}],InjectBinder:[function(t,e,n){"use strict";cc._RF.push(e,"7551dD9jsZFgLuvJx/s9wOe","InjectBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Bind/Binder"),i=t("../Bind/Binding"),r=t("../Bind/BindConst"),a=t("./Injector"),c=t("./InjectBinding"),s=t("../Decorator/DecoratorConst"),u=t("../IocConst"),l=s.DecoratorConst.DECORATOR_CLASS_BINDER,d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IInjectBinder"},enumerable:!0,configurable:!0}),e}(u.IConstructorName);n.__IC_InjectBinder=d;var p=function(t){function e(){var e=t.call(this)||this;return e._injector=new a.Injector,e._injector.binder=e,e._injector.injectClassBinder=l,e}return __extends(e,t),Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.getInstance=function(t,e){e||(e=r.BindingConst.NULL);var n=this.getBinding(i.Binding.checkAbstract(t),e);if(null==n)throw new Error("InjectionBinder has no binding for:\n\tkey: "+t+"\nname: "+e);var o=this._injector.instantiate(n,!1);return this._injector.tryInject(n,o),o},e.prototype.getBinding=function(e,n){return t.prototype.getBinding.call(this,e,n)},e.prototype.bind=function(e){return t.prototype.bind.call(this,e)},e.prototype.getRawBinding=function(){return new c.InjectBinding(this.resolver.bind(this))},e.prototype.unbindAllMark=function(){var t=this,e=[];this._bindings.forEach(function(t){t.forEach(function(t){t.isUnbind&&e.push(t)})}),e.forEach(function(e){t.unbind(e.key,e.name)})},e}(o.Binder);n.InjectBinder=p,cc._RF.pop()},{"../Bind/BindConst":"BindConst","../Bind/Binder":"Binder","../Bind/Binding":"Binding","../Decorator/DecoratorConst":"DecoratorConst","../IocConst":"IocConst","./InjectBinding":"InjectBinding","./Injector":"Injector"}],InjectBinding:[function(t,e,n){"use strict";cc._RF.push(e,"f0ec6GNJuxDnoJPcjGkt6Y4","InjectBinding"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Bind/Binding"),i=t("./InjectConst"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isUnbind=!1,e._bindingType=i.InjectConst.BindingType.DEFAULT,e._isInject=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"isInject",{get:function(){return this._isInject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"args",{get:function(){return this._args},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingType",{get:function(){return this._bindingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUnbind",{get:function(){return this._isUnbind},enumerable:!0,configurable:!0}),e.prototype.toArgs=function(){return this._args=arguments,null!=this._resolver&&this._resolver(this),this},e.prototype.toSingleton=function(){return this._bindingType===i.InjectConst.BindingType.VALUE?this:(this._bindingType=i.InjectConst.BindingType.SINGLETON,null!=this._resolver&&this._resolver(this),this)},e.prototype.unBind=function(){return this._isUnbind=!0,this},e.prototype.toValue=function(t){return this._bindingType=i.InjectConst.BindingType.VALUE,this.setValue(t),this},e.prototype.setValue=function(t){return this.to(t),this},e.prototype.toInject=function(t){return this._isInject=t,this},e.prototype.to=function(e){return t.prototype.to.call(this,e)},e.prototype.toName=function(e){return t.prototype.toName.call(this,e)},e}(o.Binding);n.InjectBinding=r,cc._RF.pop()},{"../Bind/Binding":"Binding","./InjectConst":"InjectConst"}],InjectConst:[function(t,e,n){"use strict";cc._RF.push(e,"34595YOX59GXbm71qjGgpVN","InjectConst"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){(function(t){t.DEFAULT="Default",t.SINGLETON="Singleton",t.VALUE="Value"})(t.BindingType||(t.BindingType={}))}(n.InjectConst||(n.InjectConst={})),cc._RF.pop()},{}],InjectDecorator:[function(t,e,n){"use strict";cc._RF.push(e,"e00f3W15G5ED67/GkosLikf","InjectDecorator"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Decorator/DecoratorConst"),i=t("../Bind/Binding"),r=o.DecoratorConst.DECORATOR_CLASS_BINDER;n.inject=function(){switch(arguments.length){case 0:break;case 1:return a(arguments[0]);case 2:return c(arguments[0],arguments[1])}};var a=function(t){return function(e,n){s(e,t,n)}},c=function(t,e){return function(n,o){s(n,t,o,e)}};function s(t,e,n,o){r.bind(t.constructor).to(i.Binding.checkAbstract(e)).toProperty(n).toName(o)}cc._RF.pop()},{"../Bind/Binding":"Binding","../Decorator/DecoratorConst":"DecoratorConst"}],InjectFactory:[function(t,e,n){"use strict";cc._RF.push(e,"28aeebq2T5K+qJtLuKurj88","InjectFactory"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./InjectConst"),i=t("../Bind/Binding"),r=function(){function t(){}return t.prototype.get=function(t,e){if(null==t)throw new Error("InjectorFactory cannot act on null binding");switch(t.bindingType){case o.InjectConst.BindingType.SINGLETON:return this.singletonOf(t,e);case o.InjectConst.BindingType.VALUE:return this.valueOf(t)}return this.instanceOf(t,e)},t.prototype.instanceOf=function(t,e){if(null!=t.value)return this.createFromValue(t.value,e);var n=this.generateImplicit(t.key,e);return this.createFromValue(n,e)},t.prototype.createFromValue=function(t,e){var n=null;try{n=null==e||0==e.length?new t:new t(e)}catch(t){}return n},t.prototype.generateImplicit=function(t,e){if(!t)return null;if(i.Binding.isConstructor(t))return this.createFromValue(t,e);throw new Error("InjectorFactory can't instantiate an Interface or Abstract Class. Class: "+t.ToString())},t.prototype.singletonOf=function(t,e){if(null!=t.value){var n=this.createFromValue(t.value,e);if(null==n)return null;t.setValue(n)}else t.setValue(this.generateImplicit(t.key,e));return t.value},t.prototype.valueOf=function(t){return t.value},t}();n.InjectFactory=r,cc._RF.pop()},{"../Bind/Binding":"Binding","./InjectConst":"InjectConst"}],Injector:[function(t,e,n){"use strict";cc._RF.push(e,"1f3d5Rl8bFFgqkH3mo70WX3","Injector"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./InjectFactory"),i=t("./InjectConst"),r=function(){function t(){this.factory=new o.InjectFactory}return t.prototype.uninject=function(t){if(!this.binder||!t)throw new Error("Attempt to inject into Injector without a Binder or null instance");var e=typeof t;if("string"===e||"boolean"===e||"number"===e||"symbol"===e||"undefined"===e||"function"===e)return t;var n=this.injectClassBinder.get(t);this.decoratorUnInject(t,n)},t.prototype.decoratorUnInject=function(t,e){var n=this;e.list.forEach(function(e){n.binder.getBinding(e.value,e.name)&&(t[e.property]=null)})},t.prototype.instantiate=function(t,e){if(!this.binder||!this.factory)throw new Error("Attempt to instantiate from Injector without a Binder or inject into Injector without a Factory");var n=null,o=null;if(t.isValueConstructor?n=t.value:o=t.value,!n&&t.isKeyConstructor&&(n=t.key),!o&&n){var i=t.args;o=this.factory.get(t,i),e&&this.tryInject(t,o)}return o},t.prototype.tryInject=function(t,e){return null!=e&&(t.isInject&&(e=this.inject(e,!1)),t.bindingType!=i.InjectConst.BindingType.SINGLETON&&t.bindingType!=i.InjectConst.BindingType.VALUE||t.toInject(!1)),e},t.prototype.inject=function(t,e){if(!this.binder||!t)throw new Error("Attempt to inject into Injector without a Binder or null instance");var n=typeof t;if("string"===n||"boolean"===n||"number"===n||"symbol"===n||"undefined"===n||"function"===n)return t;var o=this.injectClassBinder.get(t);return this.decoratorInject(t,o),t},t.prototype.decoratorInject=function(t,e){var n=this;e.list.forEach(function(e){var o=n.binder.getBinding(e.value,e.name);if(o){var i=n.getInjectValue(o.key,o.name);t[e.property]=i}})},t.prototype.getInjectValue=function(t,e){var n=this.binder.getBinding(t,e);if(!n)return null;if(n.bindingType===i.InjectConst.BindingType.VALUE){if(n.isInject){var o=this.inject(n.value,!1);return n.toInject(!1),o}return n.value}return n.bindingType==i.InjectConst.BindingType.SINGLETON?((n.isValueConstructor||null==n.value)&&this.instantiate(n,!0),n.value):this.instantiate(n,!0)},t}();n.Injector=r,cc._RF.pop()},{"./InjectConst":"InjectConst","./InjectFactory":"InjectFactory"}],InputControlCommand:[function(t,e,n){"use strict";cc._RF.push(e,"967bfawJw1Kz4kVhzMfDMK3","InputControlCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Command/Command"),i=t("../../lib/framework/Injector/InjectDecorator"),r=t("../view/Animal"),a=t("../util/Model"),c=t("../util/TouchUtil"),s=t("../util/Util"),u=t("../util/Manager"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(){var t=this;this.tUtl.on(c.TouchDirection.Up,function(e){e.sPosX>=0?t.areaOnMove(c.TouchDirection.Up):t.areaOnMove(c.TouchDirection.Down)}),this.tUtl.on(c.TouchDirection.Down,function(e){e.sPosX>=0?t.areaOnMove(c.TouchDirection.Up):t.areaOnMove(c.TouchDirection.Down)}),this.tUtl.on(c.TouchDirection.Left,function(e){e.sPosY>=0?t.areaOnMove(c.TouchDirection.Left):t.areaOnMove(c.TouchDirection.Right)}),this.tUtl.on(c.TouchDirection.Right,function(e){e.sPosY>=0?t.areaOnMove(c.TouchDirection.Left):t.areaOnMove(c.TouchDirection.Right)})},e.prototype.areaOnMove=function(t){this.mMdl.pauseFlag||(t===c.TouchDirection.Left||t===c.TouchDirection.Right?this.rotateAnimals(0):t!==c.TouchDirection.Up&&t!==c.TouchDirection.Down||this.rotateAnimals(1))},e.prototype.rotateAnimals=function(t){var e=this;if(this.mMdl.isRotationing)this.iMdl.waitingHandle=this.rotateAnimals(t);else{this.aMgr.play("Jump");var n=this;this.mMdl.isRotationing=!0;var o=t?[1,-1]:[-1,1],i=o[0],a=o[1],c=cc.scaleBy(this.mMdl.rotateDur,i,a);this.iMdl.lastAction=this.animalsNode.runAction(cc.sequence(c,cc.callFunc(function(){n.resetAnimalsNode(t),n.animalsNode.children&&e.animalsNode.children.length>0&&n.animalsNode.children.forEach(function(t,e){return t.getComponent(r.default).rePositonAnimal(e)}),n.mMdl.isRotationing=!1,e.iMdl.waitingHandle&&e.iMdl.waitingHandle()})))}},e.prototype.resetAnimalsNode=function(t){var e=this.animalsNode.children;t?(this.switchIndex(e,0,3),this.switchIndex(e,1,2)):(this.switchIndex(e,0,1),this.switchIndex(e,3,2)),this.animalsNode.setScale(1,1)},e.prototype.switchIndex=function(t,e,n){var o=t[n];t[n]=t[e],t[e]=o},__decorate([i.inject(a.__IC_Model,a.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([i.inject(a.__IC_Model,a.ModelType.Input)],e.prototype,"iMdl",void 0),__decorate([i.inject(cc.Node,"Animals")],e.prototype,"animalsNode",void 0),__decorate([i.inject(s.__IC_Util,s.UtilType.Touch)],e.prototype,"tUtl",void 0),__decorate([i.inject(u.__IC_Manager,u.ManagerType.Audio)],e.prototype,"aMgr",void 0),e}(o.Command);n.InputControlCommand=l,cc._RF.pop()},{"../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../util/Manager":"Manager","../util/Model":"Model","../util/TouchUtil":"TouchUtil","../util/Util":"Util","../view/Animal":"Animal"}],InputModel:[function(t,e,n){"use strict";cc._RF.push(e,"c2bfdoKQwdIQqPB9AKh/9b9","InputModel"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onConstructor=function(){this.lastAction=null,this.waitingHandle=null},e}(t("../util/Singleton").Singleton);n.InputModel=o,cc._RF.pop()},{"../util/Singleton":"Singleton"}],IocComponet:[function(t,e,n){"use strict";cc._RF.push(e,"6b5ef0pHdlNrZaRKKuM7UIM","IocComponet"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=t("../framework/Context/Context"),r=t("./IocRoot"),a=cc._decorator.ccclass,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._requiresContext=!0,e._registerWithContext=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"requiresContext",{get:function(){return this._requiresContext},set:function(t){this._requiresContext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoRegisterWithContext",{get:function(){return this._registerWithContext},set:function(t){this._registerWithContext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldRegister",{get:function(){return this.enabled&&this.node.activeInHierarchy},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.autoRegisterWithContext&&!this.registeredWithContext&&this.shouldRegister&&this.bubbleToContext(this,o.Add,!1)},e.prototype.start=function(){this.autoRegisterWithContext&&!this.registeredWithContext&&this.shouldRegister&&this.bubbleToContext(this,o.Add,!0)},e.prototype.bubbleToContext=function(t,e,n){for(var a=0,c=t.node;null!=c.parent&&a<100;)if(a++,null!=(c=c.parent).getComponent(r.IocRoot)){var s=c.getComponent(r.IocRoot);if(null!=s.context){var u=s.context,l=!0;switch(e){case o.Add:u.crossContextBinder.injector.inject(this,!0),this.registeredWithContext=!0;break;case o.Remove:case o.Enable:case o.Disable:break;default:l=!1}if(l)return}}if(this.requiresContext&&n&&e==o.Add){if(null!=i.Context.firstContext)return void(this.registeredWithContext=!0);var d=void 0;throw 100==a?d="A view couldn't find a context. Loop limit reached.":(d="A view was added with no context. Views must be added into the hierarchy of their ContextView lest all hell break loose.",d+="\nView: "+t.toString()),new Error(d)}},e=__decorate([a],e)}(cc.Component);n.IocComponet=c,function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove",t[t.Enable=2]="Enable",t[t.Disable=3]="Disable"}(o=n.BubbleType||(n.BubbleType={})),cc._RF.pop()},{"../framework/Context/Context":"Context","./IocRoot":"IocRoot"}],IocConst:[function(t,e,n){"use strict";cc._RF.push(e,"67387yqV7pEXoul73ptfVgf","IocConst"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.IC_ERROR="can't implement class that is only as interface"}(n.IocError||(n.IocError={}));var o=function(){return function(){}}();n.IConstructorName=o,cc._RF.pop()},{}],IocRoot:[function(t,e,n){"use strict";cc._RF.push(e,"20c5fi5M1VGUq8Ui3+x/5K/","IocRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../framework/Context/Context"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"shouldRegister",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.onDestroy=function(){null!=this.context&&null!=o.Context.firstContext&&o.Context.firstContext.removeCrossContext(this.context)},e=__decorate([r],e)}(cc.Component));n.IocRoot=a,cc._RF.pop()},{"../framework/Context/Context":"Context"}],IocView:[function(t,e,n){"use strict";cc._RF.push(e,"6d881JMFxtH7JPJAVAZTBOg","IocView"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./IocComponet"),i=t("../framework/Injector/InjectDecorator"),r=t("../framework/Signal/SignalManager"),a=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},__decorate([i.inject(r.__IC_SignalManager)],e.prototype,"sMgr",void 0),e=__decorate([a],e)}(o.IocComponet);n.IocView=c,cc._RF.pop()},{"../framework/Injector/InjectDecorator":"InjectDecorator","../framework/Signal/SignalManager":"SignalManager","./IocComponet":"IocComponet"}],LogicNode:[function(t,e,n){"use strict";cc._RF.push(e,"7c5c4fbRltABqY6TjU7mTEI","LogicNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Injector/InjectDecorator"),i=t("../signal/MainSignalEnum"),r=t("../../lib/framework/Injector/InjectBinder"),a=t("../util/Model"),c=t("../../lib/extensions/IocView"),s=cc._decorator,u=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.inj.bind(cc.Node).toName("LogicNode").toValue(this.node).unBind()},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.update=function(t){this.sMgr&&!this.mMdl.pauseFlag&&this.sMgr.get(i.MainSignalEnum.Update).dispatch(t)},__decorate([o.inject(a.__IC_Model,a.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([o.inject(r.__IC_InjectBinder)],e.prototype,"inj",void 0),e=__decorate([u],e)}(c.IocView));n.default=l,cc._RF.pop()},{"../../lib/extensions/IocView":"IocView","../../lib/framework/Injector/InjectBinder":"InjectBinder","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../signal/MainSignalEnum":"MainSignalEnum","../util/Model":"Model"}],Login:[function(t,e,n){"use strict";cc._RF.push(e,"71189oPq0RPJbIYTGTjs9Lg","Login");var o=r(t("../../common")),i=r(t("../WxGameApi"));function r(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(o.default.WxGameApi=i.default,i.default.isRunInWeiXin){var t=function(t,e,n){return new Promise(function(o,r){i.default.getOrCacheResFile(t,e,function(t){n(t),o()})})},e=t("https://636f-common-510ecc-1257233686.tcb.qcloud.la/bgm.mp3","bgm.mp3",function(t){i.default.playBGM(t)}),n=t("https://636f-common-510ecc-1257233686.tcb.qcloud.la/default_video.mp4","video.mp4",function(t){o.default.viedo=t}),r=(new Date).getSeconds();Promise.all([e,n]).then(function(){var t=(new Date).getSeconds()-r;console.info("[\u7f13\u5b58\u5b8c\u6210]"+t+"[\u79d2]")}),console.info("[\u767b\u5165\u5fae\u4fe1\u5e73\u53f0]"),wx.login({success:function(t){console.info("[\u767b\u5f55\u6210\u529f]"+t)},fail:function(t){console.info("[\u767b\u5f55\u5931\u8d25]"+t)}}),this.launchOptionsSync(),this.preloadFriendInfo(),this.preloadGroupInfo()}},preloadFriendInfo:function(){i.default.isRunInWeiXin&&wx.getOpenDataContext().postMessage({message:{type:"command",function:"preload",arguments:"friend",data:""}})},preloadGroupInfo:function(){o.default.shareTickets&&0!==o.default.shareTickets.length&&wx.getOpenDataContext().postMessage({message:{type:"command",function:"preload",arguments:"group",data:o.default.shareTickets[0]}})},launchOptionsSync:function(){o.default.shareTickets||(o.default.shareTickets=[]);var t=wx.getLaunchOptionsSync();switch(console.info("[\u540c\u6b65\u542f\u52a8\u9009\u9879]"+t),t.scene){case 1044:t.shareTicket&&o.default.shareTickets.push(t.shareTicket)}}}),cc._RF.pop()},{"../../common":"Common","../WxGameApi":"WxGameApi"}],LookRankCommand:[function(t,e,n){"use strict";cc._RF.push(e,"1572f7cGMZPdZohUXwgX1mC","LookRankCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Command/Command"),i=t("../../lib/framework/Injector/InjectDecorator"),r=t("../../lib/framework/Injector/InjectBinder"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(){this.lookRank()},e.prototype.lookRank=function(){this.inj.unbindAllMark(),cc.director.loadScene("Rank")},__decorate([i.inject(r.__IC_InjectBinder)],e.prototype,"inj",void 0),e}(o.Command);n.LookRankCommand=a,cc._RF.pop()},{"../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectBinder":"InjectBinder","../../lib/framework/Injector/InjectDecorator":"InjectDecorator"}],MainContext:[function(t,e,n){"use strict";cc._RF.push(e,"4838aJ9jUREf4FTm82V2dVZ","MainContext"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../command/StartCommand"),i=t("../../Lib/Framework/Signal/SignalManager"),r=t("../../Lib/Framework/Context/Context"),a=t("../signal/MainSignalManager"),c=t("../Model/MainModel"),s=t("../command/UpdateCommand"),u=t("../command/GenerateCommand"),l=t("../signal/MainSignalEnum"),d=t("../util/MainUtil"),p=t("../command/RestartCommand"),h=t("../command/LookRankCommand"),f=t("../command/MatchCommand"),m=t("../util/PrefabManager"),g=t("../util/Manager"),_=t("../util/Model"),y=t("../util/TouchUtil"),C=t("../command/InputControlCommand"),M=t("../Model/InputModel"),v=t("../util/Util"),b=t("../util/AudioUtil"),I=t("../util/AudioManager"),j=t("../command/BackHomeCommand"),B=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.addCore=function(){t.prototype.addCore.call(this),this.injectBinder.bind(i.__IC_SignalManager).to(a.MainSignalManager).toSingleton(),this.injectBinder.bind(_.__IC_Model).toValue(c.MainModel.Instance).toName(_.ModelType.Main),this.injectBinder.bind(_.__IC_Model).toValue(M.InputModel.Instance).toName(_.ModelType.Input),this.injectBinder.bind(v.__IC_Util).toValue(d.MainUtil.Instance).toName(v.UtilType.Main),this.injectBinder.bind(v.__IC_Util).toValue(y.TouchUtil.Instance).toName(v.UtilType.Touch),this.injectBinder.bind(v.__IC_Util).toValue(b.AudioUtil.Instance).toName(v.UtilType.Audio),this.injectBinder.bind(g.__IC_Manager).toValue(m.default.Instance).toName(g.ManagerType.Prefab),this.injectBinder.bind(g.__IC_Manager).toValue(I.default.Instance).toName(g.ManagerType.Audio)},e.prototype.mapBindings=function(){t.prototype.mapBindings.call(this);var e=this.injectBinder.getInstance(i.__IC_SignalManager,null);this.commandBinder.bind(e.get(l.MainSignalEnum.Start)).to(o.StartCommand),this.commandBinder.bind(e.get(l.MainSignalEnum.Update)).to(s.UpdateCommand).Pooled(),this.commandBinder.bind(e.get(l.MainSignalEnum.Generate)).to(u.GenerateCommand),this.commandBinder.bind(e.get(l.MainSignalEnum.Restart)).to(p.RestartCommand),this.commandBinder.bind(e.get(l.MainSignalEnum.LookRank)).to(h.LookRankCommand),this.commandBinder.bind(e.get(l.MainSignalEnum.Match)).to(f.MatchCommand),this.commandBinder.bind(e.get(l.MainSignalEnum.InputControl)).to(C.InputControlCommand),this.commandBinder.bind(e.get(l.MainSignalEnum.BackHome)).to(j.BackHomeCommand)},e.prototype.start=function(){return t.prototype.start.call(this),this},e}(r.Context);n.MainContext=B,cc._RF.pop()},{"../../Lib/Framework/Context/Context":"Context","../../Lib/Framework/Signal/SignalManager":"SignalManager","../Model/InputModel":"InputModel","../Model/MainModel":"MainModel","../command/BackHomeCommand":"BackHomeCommand","../command/GenerateCommand":"GenerateCommand","../command/InputControlCommand":"InputControlCommand","../command/LookRankCommand":"LookRankCommand","../command/MatchCommand":"MatchCommand","../command/RestartCommand":"RestartCommand","../command/StartCommand":"StartCommand","../command/UpdateCommand":"UpdateCommand","../signal/MainSignalEnum":"MainSignalEnum","../signal/MainSignalManager":"MainSignalManager","../util/AudioManager":"AudioManager","../util/AudioUtil":"AudioUtil","../util/MainUtil":"MainUtil","../util/Manager":"Manager","../util/Model":"Model","../util/PrefabManager":"PrefabManager","../util/TouchUtil":"TouchUtil","../util/Util":"Util"}],MainModel:[function(t,e,n){"use strict";cc._RF.push(e,"97df2ilaBhGQovdyZBORwK/","MainModel"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.foodPool=null,e.currentFoodNodes=[],e.lastFoodIndex=0,e.lastTrack=0,e.animalDatas=[{image:"animals/bird",type:"0",spriteFrame:null},{image:"animals/bear",type:"1",spriteFrame:null},{image:"animals/rabbit",type:"2",spriteFrame:null},{image:"animals/dog",type:"3",spriteFrame:null}],e.foodDatas=[{image:"foods/food-bird",type:"0",spriteFrame:null},{image:"foods/food-bear",type:"1",spriteFrame:null},{image:"foods/food-rabbit",type:"2",spriteFrame:null},{image:"foods/food-dog",type:"3",spriteFrame:null}],e.rotateDur=.1,e.isRotationing=!1,e.animalTextureRect={width:264,height:268},e.pauseFlag=!0,e.isHide=!1,e.isLookVideo=!1,e.score=0,e.timer=0,e.lastTimer=0,e.timePeriod=2.5,e.currentLevel=0,e.initTimePeriod=0,e.minTimePeriod=.5,e.lastScore=0,e.maxScore=0,e.harderRatios=function(){for(var t=[],e=0;e<=20;e++)t[e]=[2*e,.1];return t}(),e}return __extends(e,t),e}(t("../util/Singleton").Singleton);n.MainModel=o,cc._RF.pop()},{"../util/Singleton":"Singleton"}],MainNode:[function(t,e,n){"use strict";cc._RF.push(e,"7b77camncxDaJHFDn1C3IGc","MainNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Injector/InjectDecorator"),i=t("../../lib/extensions/IocView"),r=t("../util/Model"),a=t("../../lib/framework/Injector/InjectBinder"),c=t("../signal/MainSignalEnum"),s=t("../Common"),u=cc._decorator,l=u.ccclass,d=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.inj.bind(cc.Node).toName("MainNode").toValue(this.node).unBind(),this.sMgr.get(c.MainSignalEnum.Start).dispatch(),s.default.WxGameApi.onHide(function(){console.info("[\u9690\u85cf\u72b6\u6001]"),e.mMdl.isHide=!0}),s.default.WxGameApi.onShow(function(){console.info("[\u663e\u793a\u72b6\u6001]]"),e.mMdl.isHide=!1,s.default.viedoHandle&&s.default.viedoHandle.play()})},e.prototype.update=function(t){},__decorate([o.inject(r.__IC_Model,r.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([o.inject(a.__IC_InjectBinder)],e.prototype,"inj",void 0),e=__decorate([l],e)}(i.IocView));n.default=d,cc._RF.pop()},{"../../lib/extensions/IocView":"IocView","../../lib/framework/Injector/InjectBinder":"InjectBinder","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../Common":"Common","../signal/MainSignalEnum":"MainSignalEnum","../util/Model":"Model"}],MainRoot:[function(t,e,n){"use strict";cc._RF.push(e,"af1c3ZXDXVDDKO9bvGdnSxw","MainRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/extensions/IocRoot"),i=t("../Common"),r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){this.context=i.default.persistRootNode.context},e.prototype.start=function(){this.context},e=__decorate([a],e)}(o.IocRoot));n.default=c,cc._RF.pop()},{"../../lib/extensions/IocRoot":"IocRoot","../Common":"Common"}],MainSignalEnum:[function(t,e,n){"use strict";cc._RF.push(e,"e49598oAXlF4o2rYpbw5OFo","MainSignalEnum"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.Start="Start",t.Update="Update",t.Generate="GenerateViewNodes",t.Restart="Restart",t.LookRank="LookRank",t.Match="Match",t.InputControl="InputControl",t.BackHome="BackHome"}(n.MainSignalEnum||(n.MainSignalEnum={})),function(t){t.onMatch="OnMatch",t.onNotMatch="OnNotMatch"}(n.GameSignalEnum||(n.GameSignalEnum={})),cc._RF.pop()},{}],MainSignalManager:[function(t,e,n){"use strict";cc._RF.push(e,"6e0aaLHhNNGlYN1P7YfZwf9","MainSignalManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info="this is a main signal manager",e}return __extends(e,t),e}(t("../../Lib/Framework/Signal/SignalManager").SignalManager);n.MainSignalManager=o,cc._RF.pop()},{"../../Lib/Framework/Signal/SignalManager":"SignalManager"}],MainUtil:[function(t,e,n){"use strict";cc._RF.push(e,"28003+2OxBB6YdnwCT1BILA","MainUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getSceneSize=function(){return cc.winSize},e.prototype.spriteRes=function(t){return new Promise(function(e,n){cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){if(t)throw t;e(n)})})},e.prototype.randomCoin=function(){return Math.round(Math.random())},e.prototype.randomNumber=function(t){return Math.floor(Math.random()*t)},e.prototype.randomValue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[this.randomNumber(t.length)]},e}(t("./Singleton").Singleton);n.MainUtil=o,cc._RF.pop()},{"./Singleton":"Singleton"}],Manager:[function(t,e,n){"use strict";cc._RF.push(e,"310e4WsEKNJlYiJdAT/X73F","Manager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IManager"},enumerable:!0,configurable:!0}),e}(t("../../lib/framework/IocConst").IConstructorName);n.__IC_Manager=o,function(t){t.Prefab="Prefab",t.Audio="Audio"}(n.ManagerType||(n.ManagerType={})),cc._RF.pop()},{"../../lib/framework/IocConst":"IocConst"}],MatchCommand:[function(t,e,n){"use strict";cc._RF.push(e,"b1ab8P9LmFK1oeRrBcqJKeC","MatchCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Command/Command"),i=t("../../lib/framework/Injector/InjectDecorator"),r=t("../view/Food"),a=t("../signal/MainSignalEnum"),c=t("../util/Model"),s=t("../view/PauseNode"),u=t("../util/Manager"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){switch(t){case a.GameSignalEnum.onMatch:this.onMatch();break;case a.GameSignalEnum.onNotMatch:this.onNotMatch()}},e.prototype.gainPoint=function(){this.aMgr.play("Score"),this.mMdl.score++,this.scoreNode.getComponent(cc.Label).string="Score: "+Number(this.mMdl.score)},e.prototype.onMatch=function(){this.gainPoint()},e.prototype.onNotMatch=function(){this.mMdl.pauseFlag=!0,this.pauseNode.active=!0,this.pauseNode.getComponent(s.default).show(),this.pauseNode.getComponent(s.default).updateScore(this.mMdl.score),this.stopAllCurrent()},e.prototype.stopAllCurrent=function(){this.mMdl.currentFoodNodes&&this.mMdl.currentFoodNodes.length>0&&this.mMdl.currentFoodNodes.forEach(function(t){t.getComponent(r.default).inited=!1})},__decorate([i.inject(c.__IC_Model,c.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([i.inject(u.__IC_Manager,u.ManagerType.Audio)],e.prototype,"aMgr",void 0),__decorate([i.inject(cc.Node,"Score")],e.prototype,"scoreNode",void 0),__decorate([i.inject(cc.Node,"Pause")],e.prototype,"pauseNode",void 0),e}(o.Command);n.MatchCommand=l,cc._RF.pop()},{"../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../signal/MainSignalEnum":"MainSignalEnum","../util/Manager":"Manager","../util/Model":"Model","../view/Food":"Food","../view/PauseNode":"PauseNode"}],Model:[function(t,e,n){"use strict";cc._RF.push(e,"d640f/rAuJKGaL6QX+YyFsF","Model"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IModel"},enumerable:!0,configurable:!0}),e}(t("../../lib/framework/IocConst").IConstructorName);n.__IC_Model=o,function(t){t.Main="Main",t.Input="Input"}(n.ModelType||(n.ModelType={})),cc._RF.pop()},{"../../lib/framework/IocConst":"IocConst"}],PauseNode:[function(t,e,n){"use strict";cc._RF.push(e,"7116bcTkJRPlL6OIc3OVCKv","PauseNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Injector/InjectDecorator"),i=t("../../lib/extensions/IocView"),r=t("../signal/MainSignalEnum"),a=t("../util/Model"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=null,e.mainTop=null,e.mainBotton=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.show=function(){this.mMdl.isLookVideo?(console.info("[\u65e0\u6cd5\u590d\u6d3b]"),this.mainButton.spriteFrame=this.replayFrame,this.mainTop.string="\u518d\u63a5\u518d\u5389",this.mainBotton.string="\u91cd\u65b0\u5f00\u59cb"):(console.info("[\u53ef\u4ee5\u590d\u6d3b]"),this.mainButton.spriteFrame=this.playVideo,this.mainTop.string="\u89c2\u770b\u5e7f\u544a",this.mainBotton.string="\u6ee1\u8840\u590d\u6d3b")},e.prototype.updateScore=function(t){this.score.string=t},e.prototype.onRestartClicked=function(){console.info("[\u89c2\u770b\u8fc7\u5e7f\u544a]"+this.mMdl.isLookVideo),this.mMdl.isLookVideo?this.sMgr.get(r.MainSignalEnum.Restart).dispatch(!1):this.sMgr.get(r.MainSignalEnum.Restart).dispatch(!0)},e.prototype.onLookRankClicked=function(){this.sMgr.get(r.MainSignalEnum.LookRank).dispatch()},e.prototype.onBackHomeClicked=function(){this.sMgr.get(r.MainSignalEnum.BackHome).dispatch()},__decorate([o.inject(a.__IC_Model,a.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([u(cc.Label)],e.prototype,"score",void 0),__decorate([u(cc.Sprite)],e.prototype,"mainButton",void 0),__decorate([u(cc.Label)],e.prototype,"mainTop",void 0),__decorate([u(cc.Label)],e.prototype,"mainBotton",void 0),__decorate([u(cc.SpriteFrame)],e.prototype,"playVideo",void 0),__decorate([u(cc.SpriteFrame)],e.prototype,"replayFrame",void 0),e=__decorate([s],e)}(i.IocView);n.default=l,cc._RF.pop()},{"../../lib/extensions/IocView":"IocView","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../signal/MainSignalEnum":"MainSignalEnum","../util/Model":"Model"}],PersistRoot:[function(t,e,n){"use strict";cc._RF.push(e,"d1547sQd8VETbozSNDeY4M2","PersistRoot"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Common"),i=t("./util/PrefabManager"),r=t("./context/MainContext"),a=t("./util/AudioManager"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabs=[],e.clips=[],e.audios=[],e.bgm=null,e}return __extends(e,t),e.prototype.onLoad=function(){o.default.isInit||(o.default.isInit=!0,console.info("[\u5f53\u524d\u7248\u672c]"+o.default.version),o.default.persistRootNode||(cc.game.addPersistRootNode(this.node),o.default.persistRootNode=this),this.context=new r.MainContext(this),this.loadPrefab(),this.loadAudio())},e.prototype.loadPrefab=function(){this.prefabs.forEach(function(t){i.default.Instance.setPrefab(t.name,t)})},e.prototype.loadAudio=function(){this.clips.forEach(function(t){a.default.Instance.setAudio(t.name,t)}),a.default.Instance.bgm=this.bgm,a.default.Instance.audios=this.audios,a.default.Instance.playBgm()},e.prototype.start=function(){},__decorate([u([cc.Prefab])],e.prototype,"prefabs",void 0),__decorate([u([cc.AudioClip])],e.prototype,"clips",void 0),__decorate([u([cc.AudioSource])],e.prototype,"audios",void 0),__decorate([u(cc.AudioSource)],e.prototype,"bgm",void 0),e=__decorate([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./Common":"Common","./context/MainContext":"MainContext","./util/AudioManager":"AudioManager","./util/PrefabManager":"PrefabManager"}],Pool:[function(t,e,n){"use strict";cc._RF.push(e,"d5a5bWVBJ5BwqFau+ma4f+n","Pool"),Object.defineProperty(n,"__esModule",{value:!0});var o,i,r,a=t("./Stack"),c=t("../framework/IocConst"),s=t("../framework/Injector/InjectDecorator"),u=t("./Prototype");(function(t){t[t.EXCEPTION=0]="EXCEPTION",t[t.WARNING=1]="WARNING",t[t.IGNORE=2]="IGNORE"})(o=n.PoolOverflowBehavior||(n.PoolOverflowBehavior={})),function(t){t[t.ONE=0]="ONE",t[t.MANY=1]="MANY",t[t.POOL=2]="POOL"}(i=n.BindingConstraintType||(n.BindingConstraintType={})),function(t){t[t.INCREMENT=0]="INCREMENT",t[t.DOUBLE=1]="DOUBLE"}(r=n.PoolInflationType||(n.PoolInflationType={}));var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IInstanceProvider"},enumerable:!0,configurable:!0}),e}(c.IConstructorName);n.__IC_InstanceProvider=l;var d=function(){function t(){this.instancesAvailable=new a.Stack,this.instancesInUse=new Set}return t.prototype.Pool=function(){this.size=0,this.constraint=i.POOL,this.uniqueValues=!0,this.overflowBehavior=o.EXCEPTION,this.inflationType=r.DOUBLE},t.prototype.bind=function(t){this.poolType=t},t.prototype.add=function(t){return this.failIf(!u.Prototype.isProtetype(t,this.poolType)," Pool Type mismatch. Pools must consist of a common concrete type.\n\t\tPool type: "+this.poolType+"\n\t\tMismatch type: "+t),this._instanceCount++,this.instancesAvailable.push(t),this},t.prototype.addList=function(t){var e=this;return t&&t.length>0&&t.forEach(function(t){e.add(t)}),this},t.prototype.remove=function(t){return this._instanceCount--,this.removeInstance(t),this},t.prototype.removeList=function(t){var e=this;return t&&t.length>0&&t.forEach(function(t){e.remove(t)}),this},Object.defineProperty(t.prototype,"value",{get:function(){return this.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instanceCount",{get:function(){return this._instanceCount},enumerable:!0,configurable:!0}),t.prototype.getInstance=function(){if(this.instancesAvailable.size>0){var t=this.instancesAvailable.pop();return this.instancesInUse.add(t),t}var e=0;if(this.size>0){if(0!=this.instanceCount)return this.failIf(this.overflowBehavior==o.EXCEPTION,"A pool has overflowed its limit.\n\t\tPool type: "+this.poolType),this.overflowBehavior==o.WARNING&&console.warn("WARNING: A pool has overflowed its limit.\n\t\tPool type: "+this.poolType),null;e=this.size}else e=0==this.instanceCount||this.inflationType==r.INCREMENT?1:this.instanceCount;if(e>0){this.failIf(null==this.instanceProvider,"A Pool of type: "+this.poolType+" has no instance provider.");for(var n=0;n<e;n++){var i=this.instanceProvider.getInstance(this.poolType);this.add(i)}return this.getInstance()}return null},t.prototype.returnInstance=function(t){this.instancesInUse.has(t)&&(t.restore(),this.instancesInUse.delete(t),this.instancesAvailable.push(t))},t.prototype.clean=function(){this.instancesAvailable.clear(),this.instancesInUse=new Set,this._instanceCount=0},Object.defineProperty(t.prototype,"available",{get:function(){return this.instancesAvailable.size},enumerable:!0,configurable:!0}),t.prototype.restore=function(){this.clean(),this.size=0},t.prototype.retain=function(){this.isRetain=!0},t.prototype.release=function(){this.isRetain=!1},t.prototype.removeInstance=function(t){this.failIf(t!=this.poolType,"Attempt to remove a instance from a pool that is of the wrong Type:\n\t\tPool type: "+this.poolType.toString()+"\n\t\tInstance type: "+t.toString()),this.instancesInUse.has(t)?this.instancesInUse.delete(t):this.instancesAvailable.pop()},t.prototype.failIf=function(t,e){if(t)throw new Error(e)},__decorate([s.inject(l)],t.prototype,"instanceProvider",void 0),t}();n.Pool=d,cc._RF.pop()},{"../framework/Injector/InjectDecorator":"InjectDecorator","../framework/IocConst":"IocConst","./Prototype":"Prototype","./Stack":"Stack"}],PrefabManager:[function(t,e,n){"use strict";cc._RF.push(e,"3a5bb+4wrBJAqBIB9E49x3C","PrefabManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isInit=!1,e}return __extends(e,t),e.prototype.onConstructor=function(){this.prefabMap=new Map},e.prototype.hasPrefab=function(t){return this.prefabMap.has(t)},e.prototype.getPrefab=function(t){return this.prefabMap.get(t)},e.prototype.setPrefab=function(t,e){this.prefabMap.set(t,e)},e}(t("./Singleton").Singleton);n.default=o,cc._RF.pop()},{"./Singleton":"Singleton"}],PrefabPool:[function(t,e,n){"use strict";cc._RF.push(e,"7f418ZEKqtNhbmVeRvPXcqv","PrefabPool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){this.type=t,this.prefab=e,this.nodePool=new cc.NodePool(t)}return t.prototype.get=function(){var t=null;return(t=this.nodePool.size()>0?this.nodePool.get():cc.instantiate(this.prefab)).active=!0,t},t.prototype.res=function(t){t.active=!1,this.nodePool.put(t)},t}();n.default=o,cc._RF.pop()},{}],Prototype:[function(t,e,n){"use strict";cc._RF.push(e,"f58catMyzpIzYiuaEPFtxVb","Prototype"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.isProtetype=function(t,e){return t instanceof e},t.getPrototypeList=function(t){var e=this;if(!this.hasPrototypeList(t)){var n=void 0;n=[];for(var o,i=[],r=t.__proto__;r&&(o=r.constructor)!==Object;)o.name.startsWith("__IC_")||(n.push(o),i.push(o),i.forEach(function(t){e.AddPrototype(t,o)})),r=r.__proto__}var a=this.prototypeMap.get(t.constructor);return Array.from(a)},t.AddPrototype=function(t,e){var n;this.prototypeMap.has(t)?n=this.prototypeMap.get(t):(n=new Set,this.prototypeMap.set(t,n)),n.add(e)},t.hasPrototypeList=function(t){return!!this.prototypeMap.has(t.constructor)},t.prototypeMap=new Map,t}();n.Prototype=o,cc._RF.pop()},{}],Rank:[function(t,e,n){"use strict";cc._RF.push(e,"3ccb8XexIlNBbiyY3cqMnte","Rank");var o=r(t("../../common")),i=r(t("../WxGameApi"));function r(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{subContextView:cc.Node,tipsUiNode:cc.Node},onLoad:function(){this.rankType=0,this.shareCount=0,i.default.isRunInWeiXin&&wx.updateShareMenu({withShareTicket:!0,success:function(){},fail:function(){}})},start:function(){i.default.isRunInWeiXin&&wx.getOpenDataContext().postMessage({message:{type:"command",function:"start",arguments:"default",data:{width:this.subContextView.width,height:this.subContextView.height}}})},switchRank:function(t){var e=t.target,n=t.target.getChildByName("Switch"),r=e.width-n.width-10;switch(this.rankType<1?this.rankType+=1:this.rankType=0,this.rankType){case 0:n.runAction(cc.moveBy(.125,cc.v2(-r,0))),i.default.isRunInWeiXin&&(this.hideShowTipsUi(),wx.getOpenDataContext().postMessage({message:{type:"command",function:"switch",arguments:"friend",data:""}}));break;case 1:if(n.runAction(cc.moveBy(.125,cc.v2(r,0))),i.default.isRunInWeiXin){var a=void 0;o.default.shareTickets&&o.default.shareTickets.length>0?(a=o.default.shareTickets[this.shareCount])?this.shareCount>=o.default.shareTickets.length-1?this.shareCount=0:this.shareCount+=1:(o.default.shareTickets=[],this.shareCount=0):this.showTipsUi("\u65e0\u6cd5\u663e\u793a\u7fa4\u6392\u884c\u699c","\u8bf7\u5148\u5206\u4eab\u5230\u7fa4\u518d\u67e5\u770b"),a&&""!=a?wx.getShareInfo({shareTicket:a,success:function(t){},fail:function(t){}}):a="",wx.getOpenDataContext().postMessage({message:{type:"command",function:"switch",arguments:"group",data:a}})}}},backhome:function(){cc.director.loadScene("Begin")},shareApp:function(){if(i.default.isRunInWeiXin){var t=this;wx.shareAppMessage({title:"\u4e00\u8d77\u6765\u73a9\u6e38\u620f\u5427\uff01",imageUrl:"https://636f-common-510ecc-1257233686.tcb.qcloud.la/share_rabbit.png?sign=9875d25b3df98df73fbaf7ae9dcdb860&t=1538207291",success:function(e){if(e.shareTickets&&""!==e.shareTickets){if(t.hideShowTipsUi(),e.shareTickets.length>0)for(var n=!1,i=0;i<e.shareTickets.length;i++){for(var r=0;r<o.default.shareTickets.length;r++)if(e.shareTickets[i]===o.default.shareTickets[r]){n=!0;break}n||o.default.shareTickets.push(e.shareTickets[i])}1===t.rankType&&wx.getOpenDataContext().postMessage({message:{type:"command",function:"switch",arguments:"group",data:e.shareTickets}})}else 1===t.rankType&&t.showTipsUi("\u65e0\u6cd5\u663e\u793a\u7fa4\u6392\u884c\u699c","\u68c0\u6d4b\u5230\u8f6c\u53d1\u5230\u4e2a\u4eba\u6216\u8005\u65e0\u6548\u7684\u7fa4")},fail:function(t){}})}},showTipsUi:function(t,e){if(this.tipsUiNode){var n=this.tipsUiNode.getComponent("TipsUiView");this.tipsUiNode.active||(this.tipsUiNode.active=!0),n&&n.display(t,e)}},hideShowTipsUi:function(){this.tipsUiNode&&this.tipsUiNode.active&&(this.tipsUiNode.active=!1)}}),cc._RF.pop()},{"../../common":"Common","../WxGameApi":"WxGameApi"}],RestartCommand:[function(t,e,n){"use strict";cc._RF.push(e,"80f85hTlelKSLFRuMN5eLpx","RestartCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../lib/framework/Command/Command"),i=t("../../lib/framework/Injector/InjectDecorator"),r=t("../util/Model"),a=t("../Common"),c=t("../util/Util"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){this.revive(),t?this.playVideo():(console.info("[\u4e0d\u64ad\u653e\u5e7f\u544a]"),this.restart(!0))},e.prototype.playVideo=function(){var t=this;if(this.mMdl.isLookVideo||(this.mMdl.isLookVideo=!0),a.default.WxGameApi.isRunInWeiXin)if(console.info("[\u5fae\u4fe1\u73af\u5883]"),a.default.viedo){var e=.25*this.mUtl.getSceneSize().width,n=.25*this.mUtl.getSceneSize().width,o=e/4,i=this.mUtl.getSceneSize().height/4-n,r=a.default.viedo;a.default.WxGameApi.checkCacheExistFile(r,function(c){c?(a.default.viedoHandle=a.default.WxGameApi.playVideo(o,i,e,n,r,1e3,!0,function(){t.restart(!1)}),console.info("[\u4f7f\u7528\u7f13\u5b58\u8def\u5f84]")):(console.info("[\u7f13\u5b58\u8def\u5f84\u65e0\u6548]"),t.restart(!1))})}else console.info("[\u64ad\u653e\u5e7f\u544a\u5931\u8d25]"),this.restart(!1);else console.info("[\u65e0\u6cd5\u64ad\u653e\u5e7f\u544a]"),this.restart(!1)},e.prototype.revive=function(){this.pauseNode.active=!1,this.clearAllCurrent()},e.prototype.result=function(){this.mMdl.isLookVideo=!1,this.mMdl.lastScore=this.mMdl.score,a.default.WxGameApi.saveScore(this.mMdl.lastScore),this.mMdl.score=0,this.scoreNode.getComponent(cc.Label).string="Score: "+Number(this.mMdl.score)},e.prototype.restart=function(t){t&&this.result(),this.mMdl.pauseFlag=!1,this.mMdl.lastFoodIndex=-1,this.mMdl.lastTrack=-1,this.mMdl.timer=0,this.mMdl.lastTimer=0,this.mMdl.timePeriod=2.5,this.mMdl.currentLevel=0},e.prototype.clearAllCurrent=function(){var t=this;this.mMdl.currentFoodNodes&&this.mMdl.currentFoodNodes.length>0&&this.mMdl.currentFoodNodes.forEach(function(e){t.mMdl.foodPool.res(e)}),this.mMdl.currentFoodNodes=[]},__decorate([i.inject(cc.Node,"Pause")],e.prototype,"pauseNode",void 0),__decorate([i.inject(r.__IC_Model,r.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([i.inject(c.__IC_Util,c.UtilType.Main)],e.prototype,"mUtl",void 0),__decorate([i.inject(cc.Node,"Score")],e.prototype,"scoreNode",void 0),e}(o.Command);n.RestartCommand=s,cc._RF.pop()},{"../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../Common":"Common","../util/Model":"Model","../util/Util":"Util"}],SignalManager:[function(t,e,n){"use strict";cc._RF.push(e,"886bdBbzhpIsZ+10mmVEjYh","SignalManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../IocConst"),i=t("./Signal"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"constructorName",{get:function(){return"ISignalManager"},enumerable:!0,configurable:!0}),e}(o.IConstructorName);n.__IC_SignalManager=r;var a=function(){function t(){this._signal_dic=new Map,this.info="this is a signal manager"}return t.prototype.get=function(t){if(this._signal_dic.has(t))return this._signal_dic.get(t);var e=new i.Signal;return"string"==typeof t&&(e.name=t),this._signal_dic.set(t,e),e},t.prototype.delete=function(t){if(this._signal_dic.has(t))return this._signal_dic.delete(t)},t}();n.SignalManager=a,cc._RF.pop()},{"../IocConst":"IocConst","./Signal":"Signal"}],Signal:[function(t,e,n){"use strict";cc._RF.push(e,"427c0+ZlWxHgYOlN8LgBK8R","Signal"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"constructorName",{get:function(){return"ISignal"},enumerable:!0,configurable:!0}),e}(t("../IocConst").IConstructorName);n.__IC_Signal=o;var i=function(){function t(){this._listener=[],this._onceListener=[]}return t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;n._listener&&0!=n._listener.length&&this._listener.forEach(function(e){e.apply(void 0,[n].concat(t))}),n._onceListener&&0!=n._onceListener.length&&this._listener.forEach(function(e){e.apply(void 0,[n].concat(t))}),this._onceListener.length=0},t.prototype.addListener=function(t){this._listener=this.addUnique(this._listener,t)},t.prototype.addOnceListener=function(t){this._onceListener=this.addUnique(this._onceListener,t)},t.prototype.removeAllListeners=function(){this._listener.length=0,this._onceListener.length=0},t.prototype.addUnique=function(t,e){if(t){for(var n=!1,o=0;o<t.length;o++)if(t[o]===e){n=!0;break}n||t.push(e)}return t},t.prototype.getTypes=function(){return[]},t}();n.Signal=i,cc._RF.pop()},{"../IocConst":"IocConst"}],Singleton:[function(t,e,n){"use strict";cc._RF.push(e,"e8efc7zDH5CVYwtlyuutrTV","Singleton"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){var e=this.constructor;if(e){if(t.classMap.has(e))throw new Error(this+" \u53ea\u5141\u8bb8\u5b9e\u4f8b\u5316\u4e00\u6b21\uff01");t.classMap.set(e,this),this.onConstructor()}}return t.prototype.onConstructor=function(){},Object.defineProperty(t,"Instance",{get:function(){return t.getInstanceOrCreate(this)},enumerable:!0,configurable:!0}),t.destroyInstance=function(e){t.classMap.has(e)&&(t.classMap.get(e).onDestroy(),t.classMap.delete(e))},t.getInstanceOrCreate=function(e){for(var n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return t.classMap.has(e)&&(n=t.classMap.get(e))?n:((n=new(e.bind.apply(e,[void 0].concat(o))))instanceof t||t.classMap.set(e,n),n)},t.prototype.onDestroy=function(){},t.classMap=new Map,t}();n.Singleton=o,cc._RF.pop()},{}],Stack:[function(t,e,n){"use strict";cc._RF.push(e,"102f9YByOBKBZm++Rz90ae0","Stack"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===e&&(e=null),this._value=t,this._next=e}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),t}();n.Item=o;var i=function(){function t(){this._size=0,this._header=new o(null)}return t.prototype.top=function(){return 0===this._size?null:this._header.next.value},t.prototype.push=function(t){var e=new o(t);e.next=this._header.next,this._header.next=e,this._size++},t.prototype.pop=function(){if(0===this._size)return null;var t=this._header.next;return this._header.next=t.next,this._size--,t.next=null,t.value},t.prototype.clear=function(){for(var t,e=this._header;0!==this._size;)e=t=e.next,t.next=null,this._size--;this._header=null},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t}();n.Stack=i,cc._RF.pop()},{}],StartCommand:[function(t,e,n){"use strict";cc._RF.push(e,"80378ce7H5E4IsAe7B9LJnz","StartCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Lib/Framework/Signal/SignalManager"),i=t("../../lib/framework/Command/Command"),r=t("../../lib/framework/Injector/InjectDecorator"),a=t("../signal/MainSignalEnum"),c=t("../util/Model"),s=t("../util/Manager"),u=t("../../lib/framework/Injector/InjectBinder"),l=t("../util/Util"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(){this.lanuch(),this.start()},e.prototype.start=function(){},e.prototype.lanuch=function(){var t=this;cc.director.getCollisionManager().enabled=!0,this.loadRes(),this.sMgr.get(a.MainSignalEnum.Generate).dispatch(function(){t.sMgr.get(a.MainSignalEnum.InputControl).dispatch(),t.sMgr.get(a.MainSignalEnum.Restart).dispatch(!1)})},e.prototype.loadRes=function(){if(this.resMgr.isInit||(this.resMgr.hasPrefab("Animal")&&this.inj.bind(cc.Prefab).toName("Animal").toValue(this.resMgr.getPrefab("Animal")),this.resMgr.hasPrefab("Food")&&this.inj.bind(cc.Prefab).toName("Food").toValue(this.resMgr.getPrefab("Food")),this.resMgr.isInit=!0),!this.resMgr.hasPrefab("Scene"))throw new Error("Scene prefab is not found");var t=cc.instantiate(this.resMgr.getPrefab("Scene"));this.mainNode.addChild(t);var e=t.getChildByName("Avatar"),n=e.getChildByName("Animals"),o=t.getChildByName("Score"),i=t.getChildByName("FoodArea");if(this.inj.bind(cc.Node).toName("Scene").toValue(t).unBind(),this.inj.bind(cc.Node).toName("Avatar").toValue(e).unBind(),this.inj.bind(cc.Node).toName("Animals").toValue(n).unBind(),this.inj.bind(cc.Node).toName("Score").toValue(o).unBind(),this.inj.bind(cc.Node).toName("FoodArea").toValue(i).unBind(),!this.resMgr.hasPrefab("PauseLayer"))throw new Error("Pause layer prefab is not found");var r=cc.instantiate(this.resMgr.getPrefab("PauseLayer"));this.mainNode.addChild(r),r.active=!1,this.inj.bind(cc.Node).toName("Pause").toValue(r).unBind()},__decorate([r.inject(o.__IC_SignalManager)],e.prototype,"sMgr",void 0),__decorate([r.inject(c.__IC_Model,c.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([r.inject(l.__IC_Util,l.UtilType.Main)],e.prototype,"mUtil",void 0),__decorate([r.inject(s.__IC_Manager,s.ManagerType.Prefab)],e.prototype,"resMgr",void 0),__decorate([r.inject(u.__IC_InjectBinder)],e.prototype,"inj",void 0),__decorate([r.inject(cc.Node,"LogicNode")],e.prototype,"logicNode",void 0),__decorate([r.inject(cc.Node,"MainNode")],e.prototype,"mainNode",void 0),e}(i.Command);n.StartCommand=d,cc._RF.pop()},{"../../Lib/Framework/Signal/SignalManager":"SignalManager","../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectBinder":"InjectBinder","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../signal/MainSignalEnum":"MainSignalEnum","../util/Manager":"Manager","../util/Model":"Model","../util/Util":"Util"}],TipsUiView:[function(t,e,n){"use strict";cc._RF.push(e,"e7fadVElChN5rAQ0/nt+RXN","TipsUiView"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.display=function(t,e){this.label.string=t,this.text.string=e},e.prototype.onClicked=function(){this.node.active=!1},__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r(cc.RichText)],e.prototype,"text",void 0),e=__decorate([i],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],TouchUtil:[function(t,e,n){"use strict";cc._RF.push(e,"8669cVe0FNF0In+MgNUI5b8","TouchUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onConstructor=function(){this.areaMap=new Map},e.prototype.registerTouchArea=function(t,e){var n,o=this;void 0===e&&(e=!1),this.areaMap.has(t)?n=this.areaMap.get(t):(n=new r,this.areaMap.set(t,n)),e&&(this.globalAreaStatus=n),t.on(cc.Node.EventType.TOUCH_START,function(t){t.getTouches().forEach(function(t){var e=t.getLocationX(),o=t.getLocationY(),r=new a;r.direction=i.No,r.touch=t,r.sPosX=e,r.sPosY=o,r.totalX=0,r.totalY=0,r.trendX=0,r.trendY=0,n.touchMap.set(t.getID(),r)})}),t.on(cc.Node.EventType.TOUCH_MOVE,function(t){t.getTouches().forEach(function(t){if(n.touchMap.has(t.getID())){var e=n.touchMap.get(t.getID()),i=t.getDelta().x,r=t.getDelta().y;e.totalX+=i,e.totalY+=r,Math.abs(i)>10&&(e.trendX+=e.totalX/i),Math.abs(r)>10&&(e.trendY+=e.totalY/r),e.totalX*e.totalX+e.totalY*e.totalY>1e4&&o.disposeTouchResult(n,t)}})}),t.on(cc.Node.EventType.TOUCH_END,function(t){t.getTouches().forEach(function(t){n.touchMap.has(t.getID())&&o.disposeTouchResult(n,t)})}),t.on(cc.Node.EventType.TOUCH_CANCEL,function(t){t.getTouches().forEach(function(t){n.touchMap.has(t.getID())&&o.disposeTouchResult(n,t)})})},e.prototype.disposeTouchResult=function(t,e){var n=t.touchMoveDetection(e);n&&t.touchEvnet[n.direction]&&t.touchEvnet[n.direction].forEach(function(t){t&&"function"==typeof t&&t(n)}),t.touchMap.delete(e.getID())},e.prototype.on=function(t,e,n){var o;return(o=n&&this.areaMap.has(n)?this.areaMap.get(n):this.globalAreaStatus).touchEvnet[t]||(o.touchEvnet[t]=[]),o.touchEvnet[t].push(e),e},e}(t("./Singleton").Singleton);n.TouchUtil=o;var i,r=function(){function t(){this.touchMap=new Map,this.touchEvnet=[]}return t.prototype.touchMoveDetection=function(t){if(!this.touchMap.has(t.getID()))return null;var e=this.touchMap.get(t.getID()),n=!1,o=i.No;if((Math.abs(e.totalX)>10||Math.abs(e.totalY)>10)&&(0!=e.trendX||0!=e.trendY)){if(0===e.trendX)n=!0,o=e.totalY>0?i.Up:i.Down;else{var r=e.totalX/e.totalY;Math.abs(r)>1&&(n=!0,o=e.totalX>0?i.Right:i.Left)}if(!n)if(0===e.trendY)n=!0,o=e.totalY>0?i.Right:i.Left;else{r=e.totalY/e.totalX;Math.abs(r)>1&&(n=!0,o=e.totalY>0?i.Up:i.Down)}}if(!n)return e.direction=i.No,e;switch(o){case i.No:return e.direction=i.No,e;case i.Up:return e.direction=i.Up,e;case i.Down:return e.direction=i.Down,e;case i.Left:return e.direction=i.Left,e;case i.Right:return e.direction=i.Right,e}},t}(),a=function(){return function(){}}();n.TouchStatus=a,function(t){t[t.No=-1]="No",t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(i=n.TouchDirection||(n.TouchDirection={})),cc._RF.pop()},{"./Singleton":"Singleton"}],UpdateCommand:[function(t,e,n){"use strict";cc._RF.push(e,"281bfAC3zhLhIGEloV4vR2u","UpdateCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../Lib/Framework/Signal/SignalManager"),i=t("../../lib/framework/Command/Command"),r=t("../../lib/framework/Injector/InjectDecorator"),a=t("../view/Food"),c=t("../util/Model"),s=t("../util/Util"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tickcount=0,e.timecount=0,e}return __extends(e,t),e.prototype.execute=function(t){this.update(t)},e.prototype.update=function(t){if(!this.mMdl.isHide&&(this.mMdl.timer+=t,this.mMdl.timer>=this.mMdl.lastTimer+this.mMdl.timePeriod&&(this.mMdl.lastTimer=this.mMdl.timer,this.newNode(),this.mMdl.timePeriod>=this.mMdl.minTimePeriod&&this.mMdl.score>0&&this.mMdl.currentLevel<this.mMdl.harderRatios.length-1))){var e=this.mMdl.harderRatios[this.mMdl.currentLevel+1],n=e[0],o=e[1];this.mMdl.score>=n&&(this.mMdl.currentLevel++,this.mMdl.timePeriod-=o,console.log("[\u96be\u5ea6\u63d0\u5347]"+this.mMdl.timePeriod))}},e.prototype.newNode=function(){var t=this.getPoolNode();t.parent||this.foodArea.addChild(t);var e=t.getComponent(a.default);return e.clear(),e.randomProps(),t},e.prototype.getPoolNode=function(){var t=this.mMdl.foodPool.get();return this.mMdl.currentFoodNodes.push(t),t},__decorate([r.inject(o.__IC_SignalManager)],e.prototype,"sMgr",void 0),__decorate([r.inject(c.__IC_Model,c.ModelType.Main)],e.prototype,"mMdl",void 0),__decorate([r.inject(cc.Node,"Scene")],e.prototype,"sceneNode",void 0),__decorate([r.inject(cc.Node,"FoodArea")],e.prototype,"foodArea",void 0),__decorate([r.inject(s.__IC_Util,s.UtilType.Main)],e.prototype,"mUtl",void 0),e}(i.Command);n.UpdateCommand=u,cc._RF.pop()},{"../../Lib/Framework/Signal/SignalManager":"SignalManager","../../lib/framework/Command/Command":"Command","../../lib/framework/Injector/InjectDecorator":"InjectDecorator","../util/Model":"Model","../util/Util":"Util","../view/Food":"Food"}],Util:[function(t,e,n){"use strict";cc._RF.push(e,"d7b47/HxGdK7InkGGcSaO4x","Util"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"constructorName",{get:function(){return"IUtil"},enumerable:!0,configurable:!0}),e}(t("../../lib/framework/IocConst").IConstructorName);n.__IC_Util=o,function(t){t.Main="Main",t.Audio="Audio",t.Touch="Touch"}(n.UtilType||(n.UtilType={})),cc._RF.pop()},{"../../lib/framework/IocConst":"IocConst"}],WxGameApi:[function(t,e,n){"use strict";cc._RF.push(e,"344aaM21pFPkrp2acqfKKm0","WxGameApi"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t)}return o(t,null,[{key:"onHide",value:function(e){t.isRunInWeiXin&&wx.onHide(e)}},{key:"onShow",value:function(e){t.isRunInWeiXin&&wx.onShow(e)}},{key:"errorLog",value:function(t){}},{key:"playBGM",value:function(e){if(t.isRunInWeiXin){var n=wx.createInnerAudioContext();n.src=e,n.loop=!0,n.autoplay=!0,n.play(),wx.onShow(function(){n.play()})}}},{key:"playVideo",value:function(e,n,o,i,r,a,c,s){if(!t.isRunInWeiXin)return null;var u=!1;console.info("[\u5c1d\u8bd5\u64ad\u653e\u89c6\u9891]<x,y>"+e+","+n+"<w,h>"+o+","+i);var l=wx.createVideo({x:e,y:n,width:o,height:i,src:r,poster:"",objectFit:"fill",controls:!1,autoplay:c});return l.onEnded(function(){u=!0,s(),l.destroy()}),l.onerror(function(){u=!0,s(),l.destroy()}),setTimeout(function(){u||(console.info("[\u89c6\u9891\u65f6\u957f]"+l),l&&l.destroy(),s())},a),l}},{key:"downFile",value:function(e,n,o,i){var r=t.userPath;wx.downloadFile({url:e,header:"",filePath:"",success:function(t){console.info("[\u4e0b\u8f7d\u6210\u529f]"+t.statusCode),wx.getFileSystemManager().saveFile({tempFilePath:t.tempFilePath,filePath:r+n,success:function(t){console.info("[\u4fdd\u5b58\u6210\u529f]"+t.savedFilePath),o(t.savedFilePath)},fail:function(t){console.info("[\u4fdd\u5b58\u5931\u8d25]"+t.errMsg)}})},fail:function(t){console.info("[\u4e0b\u8f7d\u5931\u8d25]"+t.errMsg),i(t)}})}},{key:"checkCacheExistFile",value:function(t,e){wx.getFileSystemManager().access({path:t,success:function(){e(!0)},fail:function(){e(!1)}})}},{key:"readFile",value:function(t,e,n){wx.getFileSystemManager().readFile({filePath:t,success:function(t){console.info("[\u6210\u529f\u83b7\u53d6]"+t),e(t)},fail:function(t){console.info("[\u83b7\u53d6\u5931\u8d25]"+t.errMsg),n(t)}})}},{key:"getOrCacheResFile",value:function(e,n,o){var i=void 0;i=!(!e||""===e);var r=t.userPath+n;t.checkCacheExistFile(r,function(a){!0===a?(console.info("[\u4ece\u7f13\u5b58\u83b7\u53d6\u8d44\u6e90]]"+n),o(r)):i?(console.info("[\u9700\u8981\u4e0b\u8f7d\u8d44\u6e90]]"+n),t.downFile(e,n,function(t){console.info("[\u4e0b\u8f7d\u6210\u529f]"+t),o(t)},function(t){console.info("[\u4e0b\u8f7d\u5931\u8d25]"+t),o(null)})):(console.info("[\u65e0\u6cd5\u83b7\u53d6\u8d44\u6e90]]"+n),o(null))})}},{key:"saveScore",value:function(e){t.isRunInWeiXin&&(console.info("[\u901a\u77e5\u5f00\u53d1\u6570\u636e\u5bb9\u5668\u5b58\u50a8\u5206\u6570]"+e),wx.getOpenDataContext().postMessage({message:{type:"command",function:"save",arguments:"score",data:e}}))}},{key:"userPath",get:function(){if(t.isRunInWeiXin)return wx.env.USER_DATA_PATH+"/"}},{key:"isRunInWeiXin",get:function(){return cc.sys.platform===cc.sys.WECHAT_GAME||(t.errorLog(),!1)}}]),t}();n.default=i,e.exports=n.default,cc._RF.pop()},{}],index:[function(t,e,n){"use strict";function o(t){return Math.floor(Math.random()*t)}cc._RF.push(e,"ef333wsORxI96EbAG/ggSpb","index"),Object.defineProperty(n,"__esModule",{value:!0}),n.spriteRes=function(t){return new Promise(function(e,n){cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){if(t)throw t;e(n)})})},n.randomCoin=function(){return Math.round(Math.random())},n.randomNumber=o,n.randomValue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[o(t.length)]},cc._RF.pop()},{}]},{},["IocComponet","IocRoot","IocView","Pool","Prototype","Stack","BindConst","Binder","Binding","Command","CommandBinder","CommandBinding","CommandConst","ICommandBinder","Context","IRoot","DecoratorClass","DecoratorClassBinder","DecoratorClassBinding","DecoratorConst","InjectBinder","InjectBinding","InjectConst","InjectDecorator","InjectFactory","Injector","IocConst","Signal","SignalManager","Common","InputModel","MainModel","PersistRoot","BackHomeCommand","GenerateCommand","InputControlCommand","LookRankCommand","MatchCommand","RestartCommand","StartCommand","UpdateCommand","MainContext","MainRoot","PrefabPool","Begin","MainSignalEnum","MainSignalManager","AudioManager","AudioUtil","MainUtil","Manager","Model","PrefabManager","Singleton","TouchUtil","Util","index","Animal","CountDownView","Food","LogicNode","MainNode","PauseNode","WxGameApi","Login","Rank","TipsUiView"]);
//# sourceMappingURL=project.js.map